---
description: 强制执行测试驱动开发工作流。搭建接口、先生成测试、然后编写最简代码使测试通过。确保 80% 以上的覆盖率。
---

# TDD 命令

此命令调用 **tdd-guide** 代理，强制执行测试驱动开发 (TDD) 方法论。

## 此命令的作用

1. **搭建接口** - 先定义类型/接口
2. **先生成测试** - 编写失败的测试 (RED)
3. **编写最简代码** - 仅编写足够通过测试的代码 (GREEN)
4. **重构** - 在保持测试通过的同时改进代码 (REFACTOR)
5. **验证覆盖率** - 确保 80% 以上的测试覆盖率

## 何时使用

在以下情况使用 `/tdd`：
- 实现新功能
- 添加新函数/组件
- 修复 Bug (先编写重现该 Bug 的测试)
- 重构现有代码
- 构建关键业务逻辑

## TDD 循环

```
RED → GREEN → REFACTOR → REPEAT

RED (红):      编写失败的测试
GREEN (绿):    编写最简代码使测试通过
REFACTOR (重构): 改进代码，保持测试通过
REPEAT (重复):   下一个功能/场景
```

## 最佳实践

**应该做：**
- ✅ 在进行任何实现前，先编写测试
- ✅ 在实现前，运行测试并确认其处于失败 (FAIL) 状态
- ✅ 仅编写最简代码以使测试通过
- ✅ 仅在测试变绿后才进行重构
- ✅ 加入边界情况和错误场景
- ✅ 目标覆盖率达到 80% 以上 (关键代码应为 100%)

**不该做：**
- ❌ 在测试前编写实现代码
- ❌ 在每次更改后跳过运行测试
- ❌ 一次性编写过多代码
- ❌ 忽略失败的测试
- ❌ 测试实现细节 (应测试行为)

## 相关代理

此命令调用位于以下位置的 `tdd-guide` 代理：
`~/.claude/agents/tdd-guide.md`
