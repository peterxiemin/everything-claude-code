---
name: evolve
description: 将相关的“直觉”(instincts) 聚类为“技能”(skills)、“命令”(commands) 或“代理”(agents)
command: true
---

# 演化命令 (Evolve Command)

## 用法

分析直觉并建议将相关的直觉聚类为更高层的结构：
- **命令 (Commands)**：当直觉描述的是用户触发的操作时
- **技能 (Skills)**：当直觉描述的是自动触发的行为时
- **代理 (Agents)**：当直觉描述的是复杂的、多步骤的流程时

```bash
/evolve                    # 分析所有直觉并建议演化方案
/evolve --domain testing   # 仅演化测试领域的直觉
/evolve --execute          # 实际执行演化并创建文件
```

## 演化规则

### → 命令 (用户触发)
当直觉描述的是用户会明确请求的操作时：
- 多个关于“当用户要求...”的直觉
- 包含“当创建新的 X 时”等触发器的直觉
- 遵循可重复序列的直觉

### → 技能 (自动触发)
当直觉描述的是应该自动发生的行为时：
- 模式匹配触发器
- 错误处理响应
- 代码风格强制执行

### → 代理 (需要深度/隔离)
当直觉描述的是复杂的、多步骤的、受益于隔离的流程时：
- 调试工作流
- 重构序列
- 研究任务

## 执行步骤

1. 读取 `~/.claude/homunculus/instincts/` 中的所有直觉
2. 按领域相似性、触发模式重叠、操作序列关系进行分组
3. 对于每个包含 3 个及以上相关直觉的聚类：
   - 确定演化类型 (命令/技能/代理)
   - 生成相应的文件
   - 保存到 `~/.claude/homunculus/evolved/` 目录下
4. 将演化后的结构链接回源直觉

## 参数

- `--execute`：实际创建演化后的结构 (默认为预览)
- `--dry-run`：预览而不创建
- `--domain <name>`：仅演化指定领域的直觉
- `--threshold <n>`：形成聚类所需的最小直觉数 (默认：3)
