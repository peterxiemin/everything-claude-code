---
description: 重申需求、评估风险并创建分步实施方案。在修改任何代码前，必须等待用户确认。
---

# 规划命令 (Plan Command)

此命令调用 **planner** 代理，在编写任何代码之前创建一份全面的实施方案。

## 此命令的作用

1. **重申需求** - 明确需要构建的内容
2. **识别风险** - 发现潜在的问题和阻碍因素
3. **创建分步方案** - 将实施过程拆解为各个阶段
4. **等待确认** - 在继续操作前必须获得用户的批准

## 何时使用

在以下情况使用 `/plan`：
- 开始一项新功能
- 进行重大的架构调整
- 进行复杂的重构工作
- 涉及多个文件或组件的修改
- 需求模糊或不明确

## 工作原理

planner 代理将会：

1. **分析请求** 并用清晰的术语重申需求
2. **按阶段拆解** 具体、可操作的步骤
3. **识别依赖关系** 组件之间的关联
4. **评估风险** 及其潜在的阻碍
5. **估计复杂度** (高/中/低)
6. **展示方案** 并等待你的明确确认

## 使用示例

```
用户：/plan 我需要实现在市场结算时发送实时通知的功能

代理 (planner)：
# 实施方案：实时市场结算通知

## 需求重申
- 当用户关注的市场结算时发送通知
- 支持多种通知渠道 (应用内、邮件、Webhook)
- 确保通知投递的可靠性
...

## 实施阶段

### 第 1 阶段：数据库架构
- 添加 notifications 表...
...

**正在等待确认**：是否按照此方案继续执行？(是/否/修改)
```

## 重要提示

**关键点**：在得到你明确的肯定答复（如“是”或“开始”）之前，planner 代理**不会**编写任何代码。

如果你希望进行修改，可以回复：
- “修改：[你的修改内容]”
- “换一种方法：[备选方案]”
- “跳过第 2 阶段，先做第 3 阶段”

## 相关代理

此命令调用位于以下位置的 `planner` 代理：
`~/.claude/agents/planner.md`
