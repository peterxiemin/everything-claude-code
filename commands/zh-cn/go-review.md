---
description: 针对地道模式、并发安全、错误处理和安全性进行全面的 Go 代码评审。调用 go-reviewer 代理。
---

# Go 代码评审 (Go Code Review)

此命令调用 **go-reviewer** 代理进行全面的 Go 语言特定代码评审。

## 此命令的作用

1. **识别 Go 更改**：通过 `git diff` 查找修改过的 `.go` 文件
2. **运行静态分析**：执行 `go vet`, `staticcheck` 和 `golangci-lint`
3. **安全扫描**：检查 SQL 注入、命令注入、竞态条件
4. **并发评审**：分析 goroutine 安全性、通道 (channel) 使用、互斥锁 (mutex) 模式
5. **地道 Go 检查**：验证代码遵循 Go 约定和最佳实践
6. **生成报告**：按严重程度对问题进行分类

## 评审类别

### 严重 (CRITICAL - 必须修复)
- SQL/命令注入漏洞
- 未经同步的竞态条件
- Goroutine 泄露
- 硬编码凭据
- 不安全的指针使用
- 关键路径中忽略错误

### 高 (HIGH - 应该修复)
- 缺失带有上下文的错误包装
- 使用 panic 代替 error 返回
- Context 未传递
- 无缓冲通道导致的死锁
- 未实现接口错误
- 缺失互斥锁保护

### 中 (MEDIUM - 考虑改进)
- 非地道的代码模式
- 导出项缺失 godoc 注释
- 低效的字符串拼接
- 切片未预分配容量
- 未使用表驱动测试
